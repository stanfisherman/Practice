@model IEnumerable<Practice.Models.Response> 

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.ResponseId)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.UserId)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Project.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FirstName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.LastName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Email)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.PhoneNumber)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Checked)
        </th>
        <th></th>
    </tr>
@foreach (var item in Model)
{
    <tr>
        <td class="responseId">
               @Html.DisplayFor(modelItem => item.ResponseId)
        </td>
        <td class="id">
            @{
                if (item.UserId == null || item.UserId.HasValue == false)
                {
                    @Html.DisplayName("New")
                }
                else
                {
                    @Html.DisplayFor(modelItem => item.UserId)
                }
            }
        </td>
        <td class="project">
            @Html.DisplayFor(modelItem => item.Project.Name)
        </td>
        <td class="firstName">
            @Html.DisplayFor(modelItem => item.FirstName)
        </td>
        <td class="lastName">
            @Html.DisplayFor(modelItem => item.LastName)
        </td>
        <td class="email">
            @Html.DisplayFor(modelItem => item.Email)
        </td>
        <td class="phoneNumber">
            @Html.DisplayFor(modelItem => item.PhoneNumber)
        </td>
        <td class="check">
            @Html.DisplayFor(modelItem => item.Checked)
        </td>
        <td>
            <a href="" , class="checkButton">Check</a> |
            <a href="", class="editButton">Edit</a> |
            @*<a href="" , class="detailsButton">Details</a> |*@
            @Html.ActionLink("Edit", "Edit", new { id = item.ResponseId }) |
            @Html.ActionLink("Details", "Details", new { id = item.ResponseId }) |
            @Html.ActionLink("Delete", "Delete", new { id = item.ResponseId })
        </td>
    </tr>
}
</table>

<div id="content" title="Basic dialog" style="display: none">
</div>

<script type="text/javascript">
    
    //check button
    $(".checkButton").click(function() {
            event.preventDefault();
            var row = $(this).parent().parent();
            $.ajax({
                url: '@Url.Action("Check", "Response")',
                type: "POST",
                data: { "id": $(this).parent().parent().find(".responseId").html() },
                success: function (result) {
                    row.find(".check").html(result);
                }
            });
    });

    //ajax buttons
        $(".editButton").click(function () {
            event.preventDefault();
            var options = { "backdrop": "static", keyboard: true };
            $.ajax({
                url: '@Url.Action("Details", "Response")',
                type: "GET",
                data: { "id": $(this).parent().parent().find(".responseId").html() },
                success: function (result) {
                    //$("#content").html(result);
                    //$("#model").modal(options);
                    //$("#model").modal('show');
                    $("#content").html(result);

                },
                complete: function (xmlHttpRequest, textStatus) {
                    $("#content").dialog({
                        autoOpen: false,
                        width: 1000,
                        height: 1000,
                        resizable: false,
                        title: "YO",
                        modal: true,
                        open: function (event, ui) {

                        },
                        buttons: {
                            "Close": function () {
                                $("#content").dialog("close");
                            }
                        }
                    });
                    $("#content").dialog("open");
                }
            });
        });
        
</script>
